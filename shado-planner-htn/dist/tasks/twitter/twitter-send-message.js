import {SystemMessage,HumanMessage}from'@langchain/core/messages';var d={identifier:"twitter-send-message",description:"Post a message to Twitter.",conditions:{"twitter-has-client":e=>e._origin.memory.state?.["twitter-has-client"]===true,"twitter-has-logged-in":e=>e._origin.memory.state?.["twitter-has-logged-in"]===true,"twitter-last-sent":e=>e._origin.memory.state?.["twitter-last-sent"]<=Date.now()-3*6e4},effects:{"twitter-last-sent":{value:e=>e._origin.memory.state?.["twitter-last-sent"]<=Date.now()-3*6e4,trigger:async e=>(e._origin.memory.state["twitter-last-sent"]=Date.now(),{success:true,payload:void 0})}},actions:{"twitter-send-message":async e=>{try{let s=[],i=!1,t={from_id:"SELF",message:"What are you thinking about today?"};e._origin.clients.twitter.getMessageThreads().includes(`twitter-${t.from_id}`)||(e._origin.clients.twitter.addMessageThread(`twitter-${t.from_id}`),i=!0),i?s=[new SystemMessage(e._origin.config.bio.join(`
`)),new HumanMessage(t.message)]:(t.message="Could you elaborate?",s=[new HumanMessage(t.message)]);let r=await e._origin.model.getMessagesResponse(s,{thread:`twitter-${t.from_id}`});return await e._origin.clients.twitter.sendMessage(r),{success:!0,payload:r}}catch(s){return {success:false,payload:s}}}}};export{d as default};